<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <script></script>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <img class="bg-image" src="assets/img/tram_bg.jpg" alt="">
    <img class="bg-overlay" src="assets/img/BG_Rectangles.png" alt="">
    <div class="wrapper">
        <a class="return-top" onclick="topFunction()">
            <img src="assets/icons/return-top-icon-2.png" alt="" style="height: 45px;" class="return-icon">
        </a>
        <!-- Nav bar-->
        <div class="header" style="margin-bottom: 2rem;">
            <a class="header-logo" href="index.html">
                <div class="title">
                    João Freire
                </div>
                <div class="subtitle">
                    Programmer
                    <div class="title-line"></div>
                </div>
            </a>
            <ul class="menu">
                <li>
                    <a class="menu-button" href="projects.html">
                        <div class="content">Portfolio</div>
                    </a>
                </li>
                <li>
                    <a class="menu-button" href="index.html#about">
                        <div class="content">About</div>
                    </a>
                </li>
                <li>
                    <a class="menu-button" href="https://github.com/jsfoao" target="_blank">
                        <div class="image">
                            <img src="assets/icons/github_logo.png" style="height: 100%;" alt="">
                        </div>
                    </a>
                </li>
                <li>
                    <a class="menu-button" href="https://www.linkedin.com/in/joao-saraivafreire/" target="_blank">
                        <div class="image">
                            <img src="assets/icons/linkedin_logo.png" style="height: 100%;" alt="">
                        </div>
                    </a>
                </li>
                <li>
                    <a class="menu-button" href="https://jwow.itch.io/" target="_blank">
                        <div class="image">
                            <img src="assets/icons/itch-icon.png" style="height: 100%;" alt="">
                        </div>
                    </a>
                </li>
            </ul>
        </div>

        <!-- CONTENT-->
        <a href="projects.html" class="back-button">
            <img src="assets/icons/back-arrow-icon.png" alt="" class="arrow-icon-back">
            Back
        </a>
        <div class="project-title-card">
            <div class="gradient-overlay" style="opacity: 0.8"></div>
            <img class="project-title-img" src="assets/img/projects/runtime-editor/g749MQ.png" alt="" style="bottom: -50%;">
            <div class="project-title-wrapper">
                <div class="project-title">
                    Runtime Editor
                </div>
                <div class="category-nav-wrapper">
                    <ul class="category-list">
                        <li><div class="card-category">Graphs</div></li>
                        <li><div class="card-category">Editor</div></li>
                        <li><div class="card-category">Unity</div></li>
                    </ul>
                    <ul class="project-menu">
                        <li>
                            <a class="menu-button" href="">
                                <div style="display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: center; min-width: 115px; transform: translateX(3px) translateY(3px);">
                                    <div class="image">
                                        <img src="assets/icons/arrow-down.png" style="height:16px; transform: translateY(3px) translateX(-2px);" alt="">
                                    </div>
                                    <div class="content" style="font-size: medium;">
                                        Latest Build
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a class="menu-button" href="https://github.com/jsfoao/RuntimeEditor" target="_blank">
                                <div class="image">
                                    <img src="assets/icons/github_logo.png" style="height: 120%;" alt="">
                                </div>
                            </a>
                        </li>
                        <li>
                            <a class="menu-button" href="https://jwow.itch.io/runtime-graph-editor" target="_blank">
                                <div class="image">
                                    <img src="assets/icons/itch-icon.png" style="height: 120%;" alt="">
                                </div>
                            </a>
                        </li>
                    </ul>   
                </div>
            </div>
        </div>
        <iframe width="100%" height="500" src="https://www.youtube.com/embed/-ulo9fZJNpE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        <div class="project-category-wrapper">
            <div class="category-title-big" style="margin-top: 1rem;">
                About
            </div>
            <div class="content-paragraph">
                <p>
                    Runtime editor for car frame building. The latest build is mainly focused on graphs for building car frames, inspired by games like
                    Dream Car Builder or Main Assembly. The main functionality for selecting and moving vertices could also be used on a level editor or
                    on multiple other applications.     
                </p>
                <p>
                    I took this challenge because I wanted to deepen my knowledge of graphs and the command pattern. The images below show some of the inspiration for this project.
                </p>
            </div>
            <div class="flex-column" style="margin-top: 1rem;">
                <img src="assets/img/projects/runtime-editor/image4.png" alt="" class="img-wrapper" style="max-height: 320px;">
                <img src="assets/img/projects/runtime-editor/image1.png" alt="" class="img-wrapper" style="height: 100%;">
            </div>
        </div>
        <div class="project-category-wrapper">
            <div class="category-title-big" style="margin-top: 1rem;">
                Graph
            </div>
            <div class="flex-column">
                <div class="content-paragraph">
                    <p>
                        My implementation of an undirectioned and unweighed graph.    
                    </p>
                    <a class="external-link" href="https://github.com/jsfoao/RuntimeEditor/blob/main/Assets/Scripts/Graph/Graph.cs" target="_blank" style="margin-bottom: 0;">
                        <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                        Graph.cs
                    </a>
                    <a class="external-link" href="https://github.com/jsfoao/RuntimeEditor/blob/main/Assets/Scripts/Graph/Vertex.cs" target="_blank">
                        <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                        Vertex.cs
                    </a>
                </div>
            </div>
            <div class="flex-column">
                <img src="assets/img/projects/runtime-editor/image3.gif" alt="" class="img-wrapper">    
                <img src="assets/img/projects/runtime-editor/simple-graph.png" alt="" class="img-wrapper">    
            </div>
        </div>
        <div class="project-category-wrapper">
            <div class="category-title-big" style="margin-top: 1rem;">
                Vertex Selection & Geometry
            </div>
            <div class="flex-column">
                <div class="content-paragraph">
                    <ul class="bullet-point" style="margin-bottom: 0;">
                        <li class="bullet-li">
                            Vertex Selection: All vertices generate planes on their positions that always face the camera. On click, camera shoots a mouse ray that will intersect those planes. If the distance between the point of intersection and the actual vertices 
                            is small enough, then the mouse clicked on the vertex.
                        </li>
                        <li class="bullet-li">
                            Transform Handles Selection: Intersecting mouse ray on plane and checking distance to projection on axis using dot product.
                        </li>
                    </ul>
                </div>
                <img src="assets/img/projects/runtime-editor/selection-geometry.png" alt="" class="img-wrapper">    
            </div>
            <div class="expandable-button">
                <a style="display: flex; align-items: center; cursor: pointer;" onclick="OnClick(this)">
                    <div class="expandable-title">Code - Geometry Library</div>
                    <img src="assets/icons/front-arrow-icon.png" alt="" class="expandable-arrow">
                </a>
                <div class="expandable-content" style="height: 0px;">    
                    <!-- HTML generated using hilite.me --><div class="code-snippet" style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">public</span> <span style="color: #66d9ef">static</span> <span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Geometry</span>
<span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">static</span> <span style="color: #f8f8f2">Vertex</span> <span style="color: #a6e22e">VertexIntersectMouseRay</span><span style="color: #f8f8f2">(Camera</span> <span style="color: #f8f8f2">camera,</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">range</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0.25f</span><span style="color: #f8f8f2">)</span>
    <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">Ray</span> <span style="color: #f8f8f2">mouseRay</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">camera.ScreenPointToRay(Input.mousePosition);</span>
        <span style="color: #f8f8f2">Transform</span> <span style="color: #f8f8f2">cameraTransform</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">camera.transform;</span>
        <span style="color: #66d9ef">foreach</span> <span style="color: #f8f8f2">(Vertex</span> <span style="color: #f8f8f2">vertex</span> <span style="color: #66d9ef">in</span> <span style="color: #f8f8f2">GraphManager.Instance.Graph.Vertices)</span>
        <span style="color: #f8f8f2">{</span>
            <span style="color: #f8f8f2">Plane</span> <span style="color: #f8f8f2">vertexPlane</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Plane(vertex.Position,</span> <span style="color: #f8f8f2">vertex.Position</span> <span style="color: #f8f8f2">+</span> <span style="color: #f8f8f2">cameraTransform.up,</span> <span style="color: #f8f8f2">vertex.Position</span> <span style="color: #f8f8f2">+</span> <span style="color: #f8f8f2">cameraTransform.right);</span>
            
            <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(vertexPlane.Raycast(mouseRay,</span> <span style="color: #66d9ef">out</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">distanceMouse))</span>
            <span style="color: #f8f8f2">{</span>
                <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">intersectMouse</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">mouseRay.GetPoint(distanceMouse);</span>
                <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">((intersectMouse</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">vertex.Position).magnitude</span> <span style="color: #f8f8f2">&lt;=</span> <span style="color: #f8f8f2">range)</span>
                <span style="color: #f8f8f2">{</span>
                    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">vertex;</span>
                <span style="color: #f8f8f2">}</span>
            <span style="color: #f8f8f2">}</span>
        <span style="color: #f8f8f2">}</span>
        <span style="color: #66d9ef">return</span> <span style="color: #66d9ef">null</span><span style="color: #f8f8f2">;</span>
    <span style="color: #f8f8f2">}</span>
    
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">static</span> <span style="color: #f8f8f2">Axis</span> <span style="color: #a6e22e">HoveringAxis</span><span style="color: #f8f8f2">(Camera</span> <span style="color: #f8f8f2">camera,</span> <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">position,</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">handleRange,</span> <span style="color: #66d9ef">out</span> <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">xProjection,</span> <span style="color: #66d9ef">out</span> <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">yProjection,</span> <span style="color: #66d9ef">out</span> <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">zProjection)</span>
    <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">xPoint</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">position</span> <span style="color: #f8f8f2">+</span> <span style="color: #f8f8f2">Vector3.right;</span>
        <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">yPoint</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">position</span> <span style="color: #f8f8f2">+</span> <span style="color: #f8f8f2">Vector3.up;</span>
        <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">zPoint</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">position</span> <span style="color: #f8f8f2">+</span> <span style="color: #f8f8f2">Vector3.forward;</span>
        <span style="color: #f8f8f2">Plane</span> <span style="color: #f8f8f2">planeXZ</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Plane(position,</span> <span style="color: #f8f8f2">xPoint,</span> <span style="color: #f8f8f2">zPoint);</span>
        <span style="color: #f8f8f2">Plane</span> <span style="color: #f8f8f2">planeXY</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Plane(position,</span> <span style="color: #f8f8f2">xPoint,</span> <span style="color: #f8f8f2">yPoint);</span>

        <span style="color: #f8f8f2">Ray</span> <span style="color: #f8f8f2">mouseRay</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">camera.ScreenPointToRay(Input.mousePosition);</span>

        <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">intersectXZ</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">IntersectPlaneWithRay(planeXZ,</span> <span style="color: #f8f8f2">mouseRay);</span>
        <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">intersectXY</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">IntersectPlaneWithRay(planeXY,</span> <span style="color: #f8f8f2">mouseRay);</span>
        <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">relativeXZ</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">intersectXZ</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">position;</span>
        <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">relativeXY</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">intersectXY</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">position;</span>
        
        <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">_xProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Vector3(Vector3.Dot(intersectXZ</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">position,</span> <span style="color: #f8f8f2">Vector3.right),</span> <span style="color: #ae81ff">0f</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">0f</span><span style="color: #f8f8f2">);</span>
        <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">_zProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Vector3(</span><span style="color: #ae81ff">0f</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">0f</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">Vector3.Dot(intersectXZ</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">position,</span> <span style="color: #f8f8f2">Vector3.forward));</span>
        <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">_yProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Vector3(</span><span style="color: #ae81ff">0f</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">Vector3.Dot(intersectXY</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">position,</span> <span style="color: #f8f8f2">Vector3.up),</span> <span style="color: #ae81ff">0f</span><span style="color: #f8f8f2">);</span>

        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">((_xProjection</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">relativeXZ).magnitude</span> <span style="color: #f8f8f2">&lt;=</span> <span style="color: #f8f8f2">handleRange</span> <span style="color: #f8f8f2">&amp;&amp;</span> <span style="color: #f8f8f2">relativeXZ.magnitude</span> <span style="color: #f8f8f2">&lt;=</span> <span style="color: #f8f8f2">EditorRenderer.Instance.HandleLength</span> <span style="color: #f8f8f2">&amp;&amp;</span> <span style="color: #f8f8f2">Mathf.Sign(relativeXZ.x)</span> <span style="color: #f8f8f2">&gt;=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">)</span>
        <span style="color: #f8f8f2">{</span>
            <span style="color: #f8f8f2">xProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">_xProjection;</span>
            <span style="color: #f8f8f2">yProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">_yProjection;</span>
            <span style="color: #f8f8f2">zProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">_zProjection;</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">Axis.X;</span>
        <span style="color: #f8f8f2">}</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">((_zProjection</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">relativeXZ).magnitude</span> <span style="color: #f8f8f2">&lt;=</span> <span style="color: #f8f8f2">handleRange</span> <span style="color: #f8f8f2">&amp;&amp;</span> <span style="color: #f8f8f2">relativeXZ.magnitude</span> <span style="color: #f8f8f2">&lt;=</span> <span style="color: #f8f8f2">EditorRenderer.Instance.HandleLength</span> <span style="color: #f8f8f2">&amp;&amp;</span> <span style="color: #f8f8f2">Mathf.Sign(relativeXZ.z)</span> <span style="color: #f8f8f2">&gt;=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">)</span>
        <span style="color: #f8f8f2">{</span>
            <span style="color: #f8f8f2">xProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">_xProjection;</span>
            <span style="color: #f8f8f2">yProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">_yProjection;</span>
            <span style="color: #f8f8f2">zProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">_zProjection;</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">Axis.Z;</span>
        <span style="color: #f8f8f2">}</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">((_yProjection</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">relativeXY).magnitude</span> <span style="color: #f8f8f2">&lt;=</span> <span style="color: #f8f8f2">handleRange</span> <span style="color: #f8f8f2">&amp;&amp;</span> <span style="color: #f8f8f2">relativeXY.magnitude</span> <span style="color: #f8f8f2">&lt;=</span> <span style="color: #f8f8f2">EditorRenderer.Instance.HandleLength</span> <span style="color: #f8f8f2">&amp;&amp;</span> <span style="color: #f8f8f2">Mathf.Sign(relativeXY.y)</span> <span style="color: #f8f8f2">&gt;=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">)</span>
        <span style="color: #f8f8f2">{</span>
            <span style="color: #f8f8f2">xProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">_xProjection;</span>
            <span style="color: #f8f8f2">yProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">_yProjection;</span>
            <span style="color: #f8f8f2">zProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">_zProjection;</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">Axis.Y;</span>
        <span style="color: #f8f8f2">}</span>
        <span style="color: #f8f8f2">xProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">_xProjection;</span>
        <span style="color: #f8f8f2">yProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">_yProjection;</span>
        <span style="color: #f8f8f2">zProjection</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">_zProjection;</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">Axis.None;</span>
    <span style="color: #f8f8f2">}</span>
    
    <span style="color: #66d9ef">private</span> <span style="color: #66d9ef">static</span> <span style="color: #f8f8f2">Vector3</span> <span style="color: #a6e22e">IntersectPlaneWithRay</span><span style="color: #f8f8f2">(Plane</span> <span style="color: #f8f8f2">plane,</span> <span style="color: #f8f8f2">Ray</span> <span style="color: #f8f8f2">ray)</span>
    <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(!plane.Raycast(ray,</span> <span style="color: #66d9ef">out</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">distance))</span> <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">Vector3.zero;</span>
        <span style="color: #f8f8f2">Vector3</span> <span style="color: #f8f8f2">intersectionPoint</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">ray.GetPoint(distance);</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">intersectionPoint;</span>
    <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

                </div>
            </div>
            <div class="expandable-button" style="margin-top: 0;">
                <a style="display: flex; align-items: center; cursor: pointer;" onclick="OnClick(this)">
                    <div class="expandable-title">Code - Selectable Interface</div>
                    <img src="assets/icons/front-arrow-icon.png" alt="" class="expandable-arrow">
                </a>
                <div class="expandable-content" style="height: 0px;">    
                    <!-- HTML generated using hilite.me --><div class="code-snippet" style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">public</span> <span style="color: #66d9ef">abstract</span> <span style="color: #66d9ef">class</span> <span style="color: #a6e22e">ISelectable</span>
<span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">bool</span> <span style="color: #f8f8f2">Selected;</span>
    
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">abstract</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">OnSelect</span><span style="color: #f8f8f2">();</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">abstract</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">OnDeselect</span><span style="color: #f8f8f2">();</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">class</span> <span style="color: #a6e22e">SelectableVertex</span> <span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">ISelectable</span>
<span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">private</span> <span style="color: #f8f8f2">Vertex</span> <span style="color: #f8f8f2">vertex;</span>

    <span style="color: #66d9ef">public</span> <span style="color: #a6e22e">SelectableVertex</span><span style="color: #f8f8f2">(Vertex</span> <span style="color: #f8f8f2">vertex)</span>
    <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.vertex</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">vertex;</span>
    <span style="color: #f8f8f2">}</span>
    
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">override</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">OnSelect</span><span style="color: #f8f8f2">()</span>
    <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">Selected</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">true</span><span style="color: #f8f8f2">;</span>
        <span style="color: #f8f8f2">vertex.Renderer.SetColor(Color.yellow);</span>

        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(EditorController.Instance.SelectedVertices.Contains(vertex))</span> <span style="color: #f8f8f2">{</span> <span style="color: #66d9ef">return</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">}</span>
        <span style="color: #f8f8f2">EditorController.Instance.SelectedVertices.Add(vertex);</span>
    <span style="color: #f8f8f2">}</span>

    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">override</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">OnDeselect</span><span style="color: #f8f8f2">()</span>
    <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(!EditorController.Instance.SelectedVertices.Contains(vertex))</span> <span style="color: #f8f8f2">{</span> <span style="color: #66d9ef">return</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">}</span>
        
        <span style="color: #f8f8f2">Selected</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">false</span><span style="color: #f8f8f2">;</span>
        <span style="color: #f8f8f2">vertex.Renderer.SetColor(Color.red);</span>
    <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></div>

                </div>
            </div>
        </div>
        <div class="project-category-wrapper">
            <div class="category-title-big" style="margin-top: 1rem;">
                Mouse State Machine
            </div>
            <a class="external-link" href="https://github.com/jsfoao/RuntimeEditor/blob/main/Assets/Scripts/Controller/MouseController.cs" target="_blank">
                <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                MouseController.cs
            </a>
            <img src="assets/img/projects/runtime-editor/mousestates.png" alt="" class="img-wrapper">   
            <div class="category-title-small" style="margin-top: 1.5rem;">
                State Transition Table
            </div> 
            <table style="margin-bottom: 2rem;">
                <tr>
                    <th>State ↓ Event →</th>
                    <th>OnClickDown</th>
                    <th>OnClickUp</th>
                    <th>OnClickAndHover</th>
                </tr>
                <tr>
                    <td>Disabled</td>
                    <td>Idling</td>
                    <td>-</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>Idling</td>
                    <td>Disabled</td>
                    <td>-</td>
                    <td>Grabbing</td>
                </tr>
                <tr>
                    <td>Grabbing</td>
                    <td>-</td>
                    <td>Idling</td>
                    <td>-</td>
                </tr>
            </table>
            <div class="flex-column">
                <div style="display: flex; flex-direction: column; gap: 0.5rem; font-style: italic;">
                    <img src="assets/img/projects/runtime-editor/image2.png" alt="" class="img-wrapper">   
                    Disabled
                </div>
                <div style="display: flex; flex-direction: column; gap: 0.5rem; font-style: italic;">
                    <img src="assets/img/projects/runtime-editor/image7.png" alt="" class="img-wrapper">   
                    Idling
                </div>
                <div style="display: flex; flex-direction: column; gap: 0.5rem; font-style: italic;">
                    <img src="assets/img/projects/runtime-editor/image5.gif" alt="" class="img-wrapper">   
                    Grabbing
                </div>
            </div>
        </div>
        <div class="project-category-wrapper">
            <div class="category-title-big" style="margin-top: 1rem;">
                Functionality
            </div>
            <table style="margin-bottom: 2rem;">
                <tr>
                    <th>Function</th>
                    <th>Behaviour</th>
                    <th>Input</th>
                </tr>
                <tr>
                    <td>Pan Camera</td>
                    <td>Pan Camera</td>
                    <td>WASD</td>
                </tr>
                <tr>
                    <td>Select Vertex</td>
                    <td>Select if vertex is clicked on. Deselect if click and no vertex in range</td>
                    <td>Mouse Left</td>
                </tr>
                <tr>
                    <td>Camera Rotation</td>
                    <td>Hold to yaw or pitch camera</td>
                    <td>Mouse Right</td>
                </tr>
                <tr>
                    <td>Extrude Vertex</td>
                    <td>Add vertex connected to selected vertex and select it</td>
                    <td>E</td>
                </tr>
                <tr>
                    <td>Delete Vertex</td>
                    <td>Remove vertex and all its edges from graph</td>
                    <td>Delete</td>
                </tr>
                <tr>
                    <td>Add Edge</td>
                    <td>Add edge between two selected vertices</td>
                    <td>F</td>
                </tr>
                <tr>
                    <td>Remove Edge</td>
                    <td>Remove edge between two selected vertices</td>
                    <td>X</td>
                </tr>
                <tr>
                    <td>Singular/Multiple Selection</td>
                    <td>Hold to switch from single to multiple vertices selection</td>
                    <td>Left Ctrl</td>
                </tr>
                <tr>
                    <td>Select all</td>
                    <td>Select all vertices</td>
                    <td>Left Ctrl + A</td>
                </tr>
                <tr>
                    <td>Undo</td>
                    <td>Execute undo command on top of stack</td>
                    <td>Q</td>
                </tr>
            </table>
        </div>
        <div class="project-category-wrapper">
            <div class="category-title-big" style="margin-top: 0.5rem;">
                Undo (Command Pattern)
            </div>
            <a class="external-link" href="https://github.com/jsfoao/RuntimeEditor/blob/main/Assets/Scripts/Input/Command.cs" target="_blank">
                <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                Command.cs
            </a>
            <a class="external-link" href="https://github.com/jsfoao/RuntimeEditor/blob/main/Assets/Scripts/Input/CommandHandler.cs" target="_blank">
                <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                CommandHandler.cs
            </a>
            <p>
                Example of how the command pattern is being used to stack commands and then undo them.
            </p>
            <div>
                <p>
                    When creating a vertex:
                    <ul class="bullet-point" style="margin-top: 0;">
                        <li class="bullet-li">
                            OnExecute: Save reference to created vertex.
                        </li>
                        <li>
                            OnUndo: Remove vertex referenced OnExecute.
                        </li>
                    </ul>
                </p>
                <p >
                    When moving a vertex:
                    <ul class="bullet-point" style="margin-top: 0;">
                        <li class="bullet-li">
                            OnExecute: Save vertex position when dropped.
                        </li>
                        <li>
                            OnUndo: Move vertex to saved position.
                        </li>
                    </ul>
                </p>    
            </div>
        </div>
        <div class="rights-reserved">
            © 2022 João Freire. All rights reserved. 
        </div>
    </div>
    <script>
        function OnClick(element){
            var content = element.parentElement.getElementsByClassName('expandable-content')[0];
            var arrow = element.parentElement.getElementsByClassName("expandable-arrow")[0];
            var snippet = content.getElementsByClassName("code-snippet")[0];
            if (content.style.height === "0px"){
                console.log(parseInt(snippet.clientHeight, 10));
                content.style.height = parseInt(snippet.clientHeight + 20) + "px";
                arrow.style.transform = "translateX(10px) rotate(-90deg)"
            }
            else{
                content.style.height = "0px";
                arrow.style.transform = "translateX(10px) rotate(90deg)"
            }
        }

        //Get the button:
        var button = document.getElementsByClassName("return-top")[0];
        var icon = document.getElementsByClassName("return-icon")[0];
            
        // When the user scrolls down 20px from the top of the document, show the button
        window.onscroll = function() {scrollFunction()};
            
        function scrollFunction() {
            if (document.documentElement.scrollTop > 200) {
                button.style.bottom = "20px";
            } else {
                button.style.bottom = "-50px";
            }
        }
        
        // When the user clicks on the button, scroll to the top of the document
        function topFunction() {
            document.body.scrollTop = 0; // For Safari
            document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
        }
    </script>
</body>
</html>