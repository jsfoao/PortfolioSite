<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <script></script>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <img class="bg-image" src="assets/img/tram_bg.jpg" alt="">
    <img class="bg-overlay" src="assets/img/BG_Rectangles.png" alt="">
    <div class="wrapper">
        <a class="return-top" onclick="topFunction()">
            <img src="assets/icons/return-top-icon-2.png" alt="" style="height: 45px;" class="return-icon">
        </a>
        <!-- Nav bar-->
        <div class="header" style="margin-bottom: 2rem;">
            <a class="header-logo" href="index.html">
                <div class="title">
                    João Freire
                </div>
                <div class="subtitle">
                    Programmer
                    <div class="title-line"></div>
                </div>
            </a>
            <ul class="menu">
                <li>
                    <a class="menu-button" href="projects.html">
                        <div class="content">Portfolio</div>
                    </a>
                </li>
                <li>
                    <a class="menu-button" href="index.html#about">
                        <div class="content">About</div>
                    </a>
                </li>
                <li>
                    <a class="menu-button" href="https://github.com/jsfoao" target="_blank">
                        <div class="image">
                            <img src="assets/icons/github_logo.png" style="height: 100%;" alt="">
                        </div>
                    </a>
                </li>
                <li>
                    <a class="menu-button" href="https://www.linkedin.com/in/joao-saraivafreire/" target="_blank">
                        <div class="image">
                            <img src="assets/icons/linkedin_logo.png" style="height: 100%;" alt="">
                        </div>
                    </a>
                </li>
                <li>
                    <a class="menu-button" href="https://jwow.itch.io/" target="_blank">
                        <div class="image">
                            <img src="assets/icons/itch-icon.png" style="height: 100%;" alt="">
                        </div>
                    </a>
                </li>
            </ul>
        </div>

        <!-- CONTENT-->
        <a href="projects.html" class="back-button">
            <img src="assets/icons/back-arrow-icon.png" alt="" class="arrow-icon-back">
            Back
        </a>
        <div class="project-title-card">
            <div class="gradient-overlay" style="opacity: 0.8"></div>
            <img class="project-title-img" src="" alt="" style="bottom: -50%;">
            <div class="project-title-wrapper">
                <div class="project-title">
                    Nata Engine
                </div>
                <div class="category-nav-wrapper">
                    <ul class="category-list">
                        <li><div class="card-category">Engine</div></li>
                        <li><div class="card-category">OpenGL</div></li>
                        <li><div class="card-category">C++</div></li>
                    </ul>
                    <ul class="project-menu">
                        <li>
                            <a class="menu-button" href="https://github.com/jsfoao/nata-engine" target="_blank">
                                <div class="image">
                                    <img src="assets/icons/github_logo.png" style="height: 120%;" alt="">
                                </div>
                            </a>
                        </li>
                    </ul>   
                </div>
            </div>
        </div>
        <div class="project-category-wrapper">
            <div class="flex-column" style="gap: 2rem; margin-top: rem; margin-bottom: 2rem;">
                <img src="assets/img/projects/nata-engine/shooterdemo.gif" alt="" style="width: 100%;">
                <div style="max-width: 250px;">
                    <div class="category-title-big">
                        Info
                    </div>
                    <p class="content-paragraph">
                        <span class="content-paragraph" style="font-family: Poppins SemiBold;">
                            Role:</span> 
                            Programmer
                    </p>
                    <p class="content-paragraph">
                        <span class="content-paragraph" style="font-family: Poppins SemiBold;">
                            Team Size:</span> 
                            Solo
                    </p>
                    <p class="content-paragraph">
                        <span class="content-paragraph" style="font-family: Poppins SemiBold;">
                            Platform:</span> 
                            PC
                    </p>
                    <p class="content-paragraph">
                        <span class="content-paragraph" style="font-family: Poppins SemiBold;">
                            Time:</span> 
                            2 months
                    </p>
                </div>
            </div>
            <div>
                <div class="category-title-big">
                    About
                </div>
                <p class="content-paragraph">
                    Nata Engine is a simple data-driven game engine built from the ground up in C++ and OpenGL. 
                    This project started as a collection of studies in OpenGL and eventually evolved into an engine.
                    Considering the complexity of a project of this nature, I've been using it as a sandbox for features,
                    algorithms or systems that then might end up making to the final build. The engine is far from being a fully fledged game engine but the current iteration
                    allows to make simple games or to use for any other visualizations as expected. You'll read about these below.
                </p>
                <p>
                    For a more detailed view of this project's features, make sure to visit the github repo.
                </p>
                <div class="category-title-small">
                    Highlights
                </div>
                <div class="flex-column">
                    <ul class="bullet-point">
                        <li class="bullet-li">
                            Rendering Engine
                        </li>
                        <li class="bullet-li">
                            Collisions
                        </li>
                        <li class="bullet-li">
                            Data-Oriented Design
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="project-category-wrapper">
            <div class="category-title-big" style="margin-bottom: -20px;">
                Rendering Engine
            </div>
            <div class="category-title-small">
                OpenGL Abstraction
            </div>
            <p class="content-paragraph">
                <a class="external-link" href="https://github.com/jsfoao/nata-engine/blob/main/nata/src/core/renderer/buffer.h" target="_blank" style="margin-bottom: 0;">
                    <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                    buffer.h
                </a>
                <a class="external-link" href="https://github.com/jsfoao/nata-engine/blob/main/nata/src/core/renderer/buffer.cpp" target="_blank" style="margin-bottom: 0;">
                    <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                    buffer.cpp
                </a>
                Rendering abstraction allows for quickly rendering objects without having to worry about all of OpenGL's boilerplate. The current abstraction structure is
                heavily influenced by this.
                <ul class="bullet-point">
                    <li class="bullet-li">
                        Buffers and Attribute Layout: ...
                    </li>
                    <li class="bullet-li">
                        Shaders and Meshes: ...
                    </li>
                </ul>
            </p>

            <div class="flex-column">
                <img src="assets/img/projects/nata-engine/pot_lighting.gif" alt="" class="img-wrapper">
                <img src="assets/img/projects/nata-engine/coloredlightsources.gif" alt="" class="img-wrapper">    
            </div>
            <div class="category-title-small">
                Rendering Architecture
            </div>
            <a class="external-link" href="https://github.com/jsfoao/nata-engine/blob/main/nata/src/core/renderer/renderer.cpp" target="_blank" style="margin-bottom: 0;">
                <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                renderer.cpp
            </a>
            <a class="external-link" href="https://github.com/jsfoao/nata-engine/blob/main/nata/src/core/comp/CModelRenderer.cpp" target="_blank" style="margin-bottom: 0;">
                <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                CModelRenderer.cpp
            </a>
            <div>
                <p style="margin-bottom: 0;">
                    Since we didn't have an animator on the team, we adapted by recurring to mostly procedural animation and using IK.
                    <ul class="bullet-point">
                        <li class="bullet-li">
                            Rendering Queue: ...
                        </li>
                        <li class="bullet-li">
                            Property Blocks: ...
                        </li>
                    </ul>
                </p>
            </div>
            <div class="flex-column">
                <img src="assets/img/projects/nata-engine/rendering.png" alt="" class="img-wrapper">
            </div>
        </div> 
        <div class="project-category-wrapper">
            <div class="category-title-big">
                Data-Oriented Design
            </div>
            <div class="content-paragraph">
                <p> 
                    The behaviour for this mechanic is mostly inspired by Little Nightmares' dragging system where the player needs to interact with an object to grab it
                    and only then can drag it around. The object will be dropped if that same button is pressed or if it goes out of range.
                </p>     
            </div>
            <div class="category-title-small">
                ECS
            </div>
            <a class="external-link" href="https://github.com/jsfoao/nata-engine/blob/main/nata/src/core/ecs/ecs.h" target="_blank" style="margin-bottom: 0;">
                <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                ecs.h
            </a>
            <p class="content-paragraph">
                Like many other ECS systems, this one is divided in three major parts: entities, components and systems (the latter being tightly coupled to both entities and components). 
                All objects in the ECS inherit from NObject. All NObjects are described by their ID, initialization, game logic and decommision (Begin, Tick and OnDestroy). Small optimizations were made
                like iterating only through the enabled entities in the world which made Object Pooling much easier to implement. More optimizations could be made like only ticking entities that are in the field of view
                or proximity but these are yet to be implemented.
            </p>
            <div class="category-title-small">
                Object Pooling
            </div>
            <a class="external-link" href="https://github.com/jsfoao/nata-engine/blob/main/nata/src/core/ecs/object_pool.h" target="_blank" style="margin-bottom: 0;">
                <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                object_pool.h
            </a>
            <p class="content-paragraph">
                A simple object pooling system made possible by using the enable/disable system previously mentioned. Since only enabled entities are iterated through on tick, having many spawned disabled ones has little to no performance impact.
            </p>
            <div class="category-title-small">
                Data-Oriented Design
            </div>
            <a class="external-link" href="https://github.com/jsfoao/nata-engine/blob/main/nata/src/core/ecs/dots.h" target="_blank" style="margin-bottom: 0;">
                <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                dots.h
            </a>
            <a class="external-link" href="https://github.com/jsfoao/nata-engine/blob/main/nata/scripts/NDAsteroidPool.h" target="_blank" style="margin-bottom: 0;">
                <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                NDAsteroidPool.h
            </a>
            <p class="content-paragraph">
                Inspired by Unity's DOTS and many other data-oriented approaches to game development, I wanted to experiment having my own for this engine too. The asteroids gif that is shown at the top of the page was made possible
                by using this system. Components are still not modular enough be seemingly with used this system but it's definitely in the engine's roadmap.
            </p>
        </div>
        <div class="project-category-wrapper">
            <div class="category-title-big" style="margin-top: 3rem;">
                Collisions
            </div>
            <div class="content-paragraph">
                <p> 
                    Simple collisions systems like Box vs Box, Sphere vs Sphere and Box vs Sphere are implemented. These systems are mostly
                    used for first iterations or checks on the collisions where then other more advanced systems take place. The most used one of These
                    right now is a system using SAT (Separated Axis Theorem) and AABBs. This system automatically imports a mesh's normals so it can be used
                    even on more complex shapes.
                </p>
            </div>
            <div class="category-title-small">
                SAT + AABB
            </div>
            <div class="flex-column">
                <div class="content-paragraph">
                    <p> 
                        The gif on the right showcases how most collisions are being handled in the engine. 
                        It works with an AABB bounding box, calculated by finding the mins and maxs on each axis. A first check is made for overlapping on each object's box and then a second iteration runs the SAT (Separated Axis Theorem) logic.
                        Further optimizations for the collision algorithm include a spatial grid that is not yet implemented.
                    </p>
                </div>
                <img src="assets/img/projects/nata-engine/satcollision.gif" alt="" class="img-wrapper">
            </div>
        </div>
        <div class="project-category-wrapper">
            <div class="category-title-big" style="margin-top: 3rem;">
                Engine's Design and Structure
            </div>
            <div class="content-paragraph">
                <p> 
                    For this project, I made a very conscious effort to keep a consistent coding structure, overall design and conventions. For the file structure,
                    I differentiated engine core files from game scripts by naming them lower-case or upper-case. For game files, they should include the prefix and the name of the class
                    on its file name. This made it very easy to quickly search, find files and differentiate them without a very deep folder structure. Some prefixes like "N" also help understand
                    if a class is from the engine or from a third-party library where names can be the same or very similar.
                </p>
            </div>
            <div class="category-title-small">
                Structure
            </div>
            <div class="flex-column">
                <div>
                    <p class="content-paragraph">
                        <ul class="bullet-point">
                            <li class="bullet-li">
                                App: Entry point from engine's main. Creates world, sets game mode and loads assets.
                            </li>
                            <li class="bullet-li">
                                World: Unique and global object on top of the ECS.
                            </li>
                            <li>
                                GameMode: Second in line after World. Multiple GameModes can be created but only one can be set at a time for the world. Initializes initial entities in world and can execute more level specific game logic.
                                Different GameModes should be created for each level. The following is an example of a GameModes' structure.
                                <a class="external-link" href="https://github.com/jsfoao/nata-engine/blob/main/nata/scripts/GSpaceShooter.h" target="_blank" style="margin-bottom: 0;">
                                    <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                                    GSpaceShooter.h
                                </a>
                                <a class="external-link" href="https://github.com/jsfoao/nata-engine/blob/main/nata/scripts/GSpaceShooter.cpp" target="_blank" style="margin-bottom: 0;">
                                    <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                                    GSpaceShooter.cpp
                                </a>
                            </li>
                            <li>
                                Player: The player is an entity with its behaviour divided in each component. The following is an example of a player.
                                <a class="external-link" href="https://github.com/jsfoao/nata-engine/blob/main/nata/scripts/EShip.h" target="_blank" style="margin-bottom: 0;">
                                    <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                                    EPlayer.h
                                </a>
                                <a class="external-link" href="https://github.com/jsfoao/nata-engine/blob/main/nata/scripts/EShip.cpp" target="_blank" style="margin-bottom: 0;">
                                    <img src="assets/icons/external_link.png" alt="" class="arrow-icon-back">
                                    EPlayer.cpp
                                </a>
                            </li>
                        </ul>
                    </p>
                </div>
            </div>
            <img src="assets/img/projects/nata-engine/order_of_execution.png" alt="" class="img-wrapper">
            <div class="category-title-small">
                Naming Conventions
            </div>
            <p class="content-paragraph">
            </p>
            <table>
                <tr>
                    <th>Prefix:</th>
                    <th>Type:</th>
                </tr>
                <tr>
                    <td>N_</td>
                    <td>Classes</td>
                </tr>
                <tr>
                    <td>F_</td>
                    <td>Structs</td>
                </tr>
                <tr>
                    <td>G_</td>
                    <td>GameMode</td>
                </tr>
                <tr>
                    <td>E_</td>
                    <td>Entity</td>
                </tr>
                <tr>
                    <td>C_</td>
                    <td>Component</td>
                </tr>
            </table>

        </div>

        <div class="project-category-wrapper">
            <div class="category-title-big">
                Main Takeaways
            </div>
        <ul class="bullet-point">
            <li class="bullet-li">
                Working on a bigger project like this forced me to constantly organize my code and structure in a way that was understandable in the present and also in the future.
                Like in most projects, I've had to refactor older systems and I felt comfortable doing it since I could easily read through the code and could
                get into it very quickly. This made the process of refactoring not seem like such a daunting task and it's something that I've constantly been doing with small optimizations
                on the engine's systems.
            </li>
            <li class="bullet-li">
                Having such an extensive roadmap like I do now can get overwhelming and it's been affecting some of the engine's iterations. Right now, I'm simply going through it
                and choose which system would be more fun to experiment with and implement instead of thinking about priority. Although this has helped keeping my motivation high with this project and 
                I've been working on it very consistently, it did negatively affect the engine's iterations as some systems could've been written better if higher priority and more fundamental tasks had
                been worked on first.
            </li>
        </ul>
        </div>
        <div class="rights-reserved">
            © 2022 João Freire. All rights reserved. 
        </div>
    </div>
    <script>
        function OnClick(element){
            var content = element.parentElement.getElementsByClassName('expandable-content')[0];
            var arrow = element.parentElement.getElementsByClassName("expandable-arrow")[0];
            var snippet = content.getElementsByClassName("code-snippet")[0];
            if (content.style.height === "0px"){
                console.log(parseInt(snippet.clientHeight, 10));
                content.style.height = parseInt(snippet.clientHeight + 20) + "px";
                arrow.style.transform = "translateX(10px) rotate(-90deg)"
            }
            else{
                content.style.height = "0px";
                arrow.style.transform = "translateX(10px) rotate(90deg)"
            }
        }

        //Get the button:
        var button = document.getElementsByClassName("return-top")[0];
        var icon = document.getElementsByClassName("return-icon")[0];
            
        // When the user scrolls down 20px from the top of the document, show the button
        window.onscroll = function() {scrollFunction()};
            
        function scrollFunction() {
            if (document.documentElement.scrollTop > 200) {
                button.style.bottom = "20px";
            } else {
                button.style.bottom = "-50px";
            }
        }
        
        // When the user clicks on the button, scroll to the top of the document
        function topFunction() {
            document.body.scrollTop = 0; // For Safari
            document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
        }
    </script>
</body>
</html>